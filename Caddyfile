{
    # Enable FrankenPHP
    frankenphp
    # Enable HTTP/3 and compression
    auto_https off
    # Define order for php_server
    order php_server before file_server
    # Disable admin API on privileged port
    admin off
}

# Use environment variable PORT (Render assigns this dynamically)
:{$PORT:8080} {
    # Set the root directory (absolute path for Docker)
    root * /app/public

    # Enable gzip compression
    encode zstd gzip

    # Enable PHP server with FrankenPHP
    php_server

    # Serve static files
    file_server

    # Logs
    log {
        output stdout
        format json
        level INFO
    }
}
